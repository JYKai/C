# 배열(array)

## 배열의 선언과 사용
같은 형태의 많은 데이터를 반복문으로 처리하기 위해서 메모리에 연속적으로 저장해놓고 쪼개서 사용하는 방법을 배열이라고 한다.

### 배열의 선언
```int ary[5]```
- int : 자료형
- ary : 배열명
- [5] : 요소 개수

```c
// 5명의 나이를 저장할 배열을 선언하고 사용하는 방법

#include <stdio.h>

int main(void)
{
    int ary[5]; // [5] -> 선언할 때는 배열 요소의 전체 개수 표시

    ary[0] = 10; // [0] -> 사용할 때는 각 요소가 배열에서 몇 번째에 있는지를 의미한다.
    ary[1] = 20;
    ary[2] = ary[0] + ary[1];
    scanf("%d", &ary[3]);

    printf("%d\n", ary[2]);
    printf("%d\n", ary[3]);
    printf("%d\n", ary[4]); // 쓰레기 값

    return 0;
}
```
- ```int ary[5];```
    - int형 변수 5개를 하나씩 선언하는 것과 전체 저장 공간의 크기는 같다.
    - 저장 공간이 연속으로 할당되며 배열명이 전체 공간의 이름이 된다.
- 배열 사용시 사용 범위를 벗어나지 않도록 주의한다.


### 배열 초기화
최초 할당된 저장 공간에는 쓰레기 값이 저장되어 있으므로 원하는 값을 가지려면 선언과 동시에 초기화 해야한다.
- 초기화는 선언 시 최초 한 번만 가능하다.
```c
// 기본적인 초기화 방법
int ary1[5] = {1, 2, 3, 4, 5};
```
- 배열은 중괄호({})로 묶어서 초기화한다.

```c
int ary2[5] = {1, 2, 3};
```
- 초깃값이 배열 요소의 개수보다 적은경우, 차례대로 초기화하고 남은 배열 요소는 모두 0으로 채운다.

```c
int ary2[1000] = {0};
```
- 자동 초기화 기능을 사용하면 배열 요소 개수가 아무리 많아도 모든 요소를 쉽게 0으로 초기화할 수 있다.

```c
int ary3[] = {1, 2, 3};
```
- 배열 요소 개수가 생략된 경우, 컴파일러는 초깃값 개수만큼 배열 요소 개수를 정하고 저장 공간을 할당한다.

```c
double ary4[5] = {1.0, 2.1, 3.1, 4.1, 5.1};
char ary5[5] = {'a', 'p', 'p', 'l', 'e'};
```
- 각각의 자료형에 맞게 배열을 초기화 한다.
    - char형 배열은 주로 문자열을 저장하는 용도로 사용된다.


### 배열과 반복문
```c
// 배열과 반복문을 사용한 성적 처리 프로그램

#include <stdio.h>

int main(void)
{
    int score[5];
    int i;
    int total = 0;
    double avg;

    for (i = 0; i < 5; i++)
    {
        scanf("%d", &score[i]);
    }

    for (i = 0; i < 5; i++)
    {
        total += score[i];
    }

    avg = total / 5.0;

    for (i = 0; i < 5; i++)
    {
        printf("%5d", score[i]);
    }
    printf("\n");
    printf("평균 : %.1lf\n", avg);

    return 0;
}
```

### sizeof 연산자를 활용한 배열 처리
배열 요소의 개수가 바뀌면 배열을 처리하는 반복문을 모두 수정해야 하는 부담이 있어 배열 요소의 개수를 직접 계산하여 반복문에 사용하는 방법이 있다. = ```sizeof(배열명) / sizeof(배열요소)```
```c
// sizeof 연산자를 사용한 배열

#include <stdio.h>

int main(void)
{
    int score[5];
    int i;
    int total = 0;
    double avg;
    int count;

    count = sizeof(score) / sizeof(score[0]);

    for (i = 0; i < count; i++)
    {
        scanf("%d", &score[i]);
    }

    for (i = 0; i < count; i++)
    {
        total += score[i];
    }

    avg = total / (double)count;

    for (i = 0; i < count; i++)
    {
        printf("%5d", score[i]);
    }
    printf("\n");
    printf("평균 : %.1lf\n", avg);

    return 0;
}
```
- ```count = sizeof(score) / sizeof(score[0]);```
    - 배열 요소의 개수(count) = 배열 전체 크기(20바이트) / 배열 요소 하나의 크기(4바이트)

</br>

## 문자를 저장하는 배열

### char형 배열의 선언과 초기화
문자열의 길이보다 최소한 하나 이상 크게 배열을 선언해야한다. (널 문자(\0)를 저장하기 위해.)
```c
// 문자열을 저장하는 char형 배열

#include <stdio.h>

int main(void)
{
    char str[80] = "applejam";

    printf("최초 문자열 : %s\n", str);
    printf("문자열 입력 : ");
    scanf("%s", str);
    printf("입력 후 문자열 : %s\n", str);

    return 0;
}
```
- 중괄호를 사용해서 문자를 차례로 나열하여 초기화해도 된다.
- 배열 선언 시 초기화하지 않은 경우
    - char형 배열 선언시 초기화를 하면 남는 배열의 요소가 0으로 채워지므로 자동으로 문자열의 끝에 널 문자가 저장되나, 초기화하지 않은 상태에서 배열 요소에 문자를 직접 대입한다면 **반드시** 마지막 문자 다음에는 널 문자를 대입해야 한다.

**널 문자의 용도**  
char형 배열에 저장된 0을 특별히 널 문자(null character)라고 부른다.
- 모든 문자는 아스키 코드 값으로 저장되므로 결국 널 문자는 아스키 코드 값이 0인 문자를 말하며 문자 상수로는 \0으로 표현된다.
- 문자열의 끝을 표시하는 용도로 사용된다.

**char형 배열 선언 시 주의할 점**  
- 배열의 크기는 최댛나 넉넉하게 선언해야 한다.
- 배열 요소의 개수는 최소한 '문자열 길이 + 1'이어야 한다.


### 문자열 대입
얼마든지 새로운 문자열을 저장할 수 있으나, 문자열의 길이가 다를 수 있으므로 일반 변수처럼 대입 연산자를 사용할 수 없다.
- ```strcpy(저장될 배열명, 저장할 문자열)```
    - char형 배열에 새로운 문자열을 저장하는 함수로, 저장할 문자열의 길이를 파악하여 딱 그 길이만큼만 char형 배열을 복사한다.
    - 문자열 끝에 널 문자도 자동으로 붙여준다.
```c
// 문자열을 대입하는 strcpy 함수

#include <stdio.h>
#include <string.h> // 문자열 관련 함수 원형을 모아놓은 헤더 파일

int main(void)
{
    char str1[80] = "cat";
    char str2[80];

    strcpy(str1, "tiger");
    strcpy(str2, str1);
    printf("%s, %s\n", str1, str2);

    return 0;
}
```

> 배열에 대입 연산자는 왜 사용할 수 없을까?
```c
char str[80];
str = "apple";
```
- 대입 연산자의 왼쪽에 사용한 배열명은 컴파일 과정에서 배열이 할당된 메모리 주소 값으로 바뀌므로 사용할 수 없다.
- ```strcpy``` 함수는 그 위치로 이동하여 메모리의 공간을 사용하도록 구현되어 있다.


### 문자열 전용 입출력 함수 : gets, puts
```scanf``` 함수는 char형 배열에 문자열을 입력할 수 있으나 중간에 빈칸이 있는 경우 빈칸 전까지만 입력한다.   
```gets``` 함수는 빈칸을 포함하여 한 줄 전체를 문자열로 입력한다. 이 함수와 짝을 이루는 문자열 출력 함수 ```puts```도 있다.
```c
// 빈칸을 포함한 문자열 입력

#include <stdio.h>

int main(void)
{
    char str[80];

    printf("문자열 입력 : ");
    gets(str);
    puts("입력된 문자열 : ");
    puts(str);

    return 0;
}
```
- ```gets(char형 배열명);```
    - 문자열 입력 중간에 빈칸이나 탭 문자를 사용할 수 있으며, enter를 누르기 전까지 전체를 하나의 문자열로 배열에 저장한다.
    - 마지막에 널 문자를 붙여서 문자열의 끝을 표시한다.
    - 입력할 배열의 크기를 검사하지 않으므로 배열의 크기보다 긴 문자열을 입력하면 배열을 벗어나 메모리 영역을 침범할 가능성이 있다.
- ```puts```
    - 문자열 상수나 char형 배열의 배열명을 입력으로 주면 문자열을 화면에 출력한다.
    - 문자열을 출력한 후에 자동으로 줄을 바꾼다.